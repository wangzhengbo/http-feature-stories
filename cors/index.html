<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Cors</title>
  </head>
  <body>
    <pre>
      1. 请求方法是以下三种方法之一：

        * HEAD 
        * GET 
        * POST 

      2. HTTP的头信息不超出以下几种字段：

        * Accept 
        * Accept-Language 
        * Content-Language 
        * Last-Event-ID 
        * Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain


      满足以上条件为简单请求，否则为非简单请求。
      非简单请求发送前，需要发送预检（Option）请求 
      
      相关返回头部字段
      Access-Control-Allow-Origin 允许的请求来自的域
      Access-Control-Allow-Methods 允许的请求方法 
      Access-Control-Allow-Headers 允许的头部字段 
      Access-Control-Max-Age 预检请求成功后多长时间内再次发送非简单请求不用进行预检
    </pre>
  </body>
  <script>
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'http://127.0.0.1:8887');
    xhr.setRequestHeader('X-Test-Cors', '123');
    xhr.send();
    xhr.onreadystatechange = handleResponse;

    function handleResponse() {
      if (xhr.readyState === 4 && xhr.status === 200) {
        const txt = document.createElement('div');
        txt.innerText = xhr.responseText;
        document.body.appendChild(txt);
      }
    }
  </script>
</html>
